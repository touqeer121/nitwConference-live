{% extends 'base.html' %}
{% block title %} | Presentation Submission{% endblock title %}
{% load static %}
{% block scripts %}
    <script src="{% static 'js/countries.js' %}"></script>
    <script>
        $(document).ready(function () {
            // messages timeout for 10 sec
            setTimeout(function () {
                $('.message_container').fadeOut('slow');
            }, 10000);
        });
    </script>
    <script>
        var _validFileExtensions = [".pdf", ".ppt", ".pptx"];
        function Validate(oForm) {
            var arrInputs = oForm.getElementsByTagName("input");
            for (var i = 0; i < arrInputs.length; i++) {
                var oInput = arrInputs[i];
                if (oInput.type == "file") {
                    var sFileName = oInput.value;
                    if (sFileName.length > 0) {
                        var blnValid = false;
                        for (var j = 0; j < _validFileExtensions.length; j++) {
                            var sCurExtension = _validFileExtensions[j];
                            if (sFileName.substr(sFileName.length - sCurExtension.length, sCurExtension.length).toLowerCase() == sCurExtension.toLowerCase()) {
                                blnValid = true;
                                break;
                            }
                        }
                        if (!blnValid) {
                            alert("The file " + sFileName + " is invalid, allowed file extensions are: " + _validFileExtensions.join(", "));
                            return false;
                        }
                    }
                }
            }

            return true;
        }
    </script>
{% endblock scripts %}
{% block content %}

<section id="hero1" class="hero">
  <div class="inner-other">
  </div>
</section>

<section class="content" style="text-align: center; margin: 0 auto; padding: 30px 0">
    {% if messages %}
        {% for mes in messages %}
            <div class="alert alert-success message_container">
                <a href="#" class="close" data-dismiss="success" aria-label="close">&times;</a>
                <strong>{{ mes }}</strong>
            </div>
        {% endfor %}
    {% endif %}
    <div class="my-main-container">
        <div>
            <h1 style="display: inline-block">Presentation Submission</h1>
            <img class="headIcon" src="data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0ibTE0MC4wNjQgNDY4aC02MS40MTNjLTE3Ljg1OCAwLTMyLjM4Ny0xNC41NzktMzIuMzg3LTMyLjV2LTE4NC44NzRjMC00LjE0My0zLjM1OC03LjUtNy41LTcuNXMtNy41IDMuMzU3LTcuNSA3LjV2MTg0Ljg3NGMwIDI2LjE5MSAyMS4yNTggNDcuNSA0Ny4zODcgNDcuNWg2MS40MTNjNC4xNDIgMCA3LjUtMy4zNTcgNy41LTcuNXMtMy4zNTgtNy41LTcuNS03LjV6Ii8+PHBhdGggZD0ibTk1Ljc1OCAxNTcuNDgxaDEyMy42MTFjNC4xNDIgMCA3LjUtMy4zNTcgNy41LTcuNXMtMy4zNTgtNy41LTcuNS03LjVoLTEyMy42MTFjLTQuMTQyIDAtNy41IDMuMzU3LTcuNSA3LjVzMy4zNTggNy41IDcuNSA3LjV6Ii8+PHBhdGggZD0ibTk1Ljc1OCAzMjIuNTIyYy00LjE0MiAwLTcuNSAzLjM1Ny03LjUgNy41czMuMzU4IDcuNSA3LjUgNy41aDE3My42MTFjNC4xNDIgMCA3LjUtMy4zNTcgNy41LTcuNXMtMy4zNTgtNy41LTcuNS03LjV6Ii8+PHBhdGggZD0ibTkzLjc2IDIxNy40OTVoMjIzLjgzN2M0LjE0MiAwIDcuNS0zLjM1NyA3LjUtNy41cy0zLjM1OC03LjUtNy41LTcuNWgtMjIzLjgzN2MtNC4xNDIgMC03LjUgMy4zNTctNy41IDcuNXMzLjM1OCA3LjUgNy41IDcuNXoiLz48cGF0aCBkPSJtOTMuNzYgMjc3LjUwOWgyMjMuODc0YzQuMTQyIDAgNy41LTMuMzU3IDcuNS03LjVzLTMuMzU4LTcuNS03LjUtNy41aC0yMjMuODc0Yy00LjE0MiAwLTcuNSAzLjM1Ny03LjUgNy41czMuMzU4IDcuNSA3LjUgNy41eiIvPjxwYXRoIGQ9Im00ODAuNjg1IDQwMy43NDljLS40MDctOC40OTktNC4xMTktMTYuNzk3LTEwLjE1Ni0yMi43MzhsLTcwLjI2NS02OS44NTd2LTE1OS42MDVjMC05Ljk5Ny0zLjg3OS0xOS40MDEtMTAuOTIzLTI2LjQ4MWwtMTEzLjQ4My0xMTQuMDQ4Yy02Ljk2OS03LjAwMy0xNi42MjUtMTEuMDItMjYuNDkzLTExLjAyaC0xNzAuNzE0Yy0yNi4xMjkgMC00Ny4zODcgMjEuMzA5LTQ3LjM4NyA0Ny41MDF2MTY4LjEyNWMwIDQuMTQzIDMuMzU4IDcuNSA3LjUgNy41czcuNS0zLjM1NyA3LjUtNy41di0xNjguMTI1YzAtMTcuOTIxIDE0LjUyOS0zMi41MDEgMzIuMzg3LTMyLjUwMWgxNzAuNzE0YzEuNzA4IDAgMy4zODEuMjExIDUuMDA2LjU4MnY0Mi4yMDJjMCA0LjE0MyAzLjM1OCA3LjUgNy41IDcuNXM3LjUtMy4zNTcgNy41LTcuNXYtMzIuMDE3bDEwNS4zMjcgMTA1Ljg1MmgtODUuODA0Yy0xMC43NjUgMC0xOS41MjMtOC43OTctMTkuNTIzLTE5LjYwOXYtMTkuMjI2YzAtNC4xNDMtMy4zNTgtNy41LTcuNS03LjVzLTcuNSAzLjM1Ny03LjUgNy41djE5LjIyNmMwIDE5LjA4NCAxNS40ODcgMzQuNjA5IDM0LjUyMyAzNC42MDloOTUuODEzYy4zNTUgMS42MDIuNTU3IDMuMjQ5LjU1NyA0LjkzdjE0OS40NTNjLTEyLjIzNC00LjI4OS0yNi40MTctMS41OC0zNi4xODYgOC4xMzEtMTMuNTEyIDEyLjg5LTEzLjUxMiAzNi4wOTggMCA0OC45ODkgMCAwIDEyLjgzNCAxMi43NiAxMi44MzQgMTIuNzZoLTQ0LjI3OWMtNC4xNDIgMC03LjUgMy4zNTctNy41IDcuNXMzLjM1OCA3LjUgNy41IDcuNWg2Mi40NmMzLjAzOCAwIDUuNzc1LTEuODMyIDYuOTMzLTQuNjQgMS4xNTktMi44MDkuNTA5LTYuMDM3LTEuNjQ1LTguMTc5bC0yNS43MjctMjUuNTc4Yy03LjY1My03LjMwMy03LjY1Mi0yMC40MTMgMC0yNy43MTYgNy43MjEtNy42NzUgMjAuMjgyLTcuNjc1IDI4LjAwMSAwbDcyLjMyNCA3MS45MDRjNy41OTIgNy4yMTcgNy42MjYgMjAuNDM5LS4wMjcgMjcuNjg5bC03Mi4zMDIgNzEuODgzYy03LjcxOCA3LjY4Ny0yMC4yNzUgNy42ODgtMjcuOTk2LS4wMDUtNy42NTMtNy4zMDMtNy42NTItMjAuNDE0IDAtMjcuNzE3bDI1LjcyNy0yNS41NzdjMi4xNTQtMi4xNDEgMi44MDQtNS4zNyAxLjY0Ni04LjE3OS0xLjE1OC0yLjgwOC0zLjg5Ni00LjY0LTYuOTMzLTQuNjRoLTE0NS41NzdjLTEwLjkwOCAwLTE5Ljc4Mi04LjgwNC0xOS43ODItMTkuNjI0czguODc1LTE5LjYyMyAxOS43ODItMTkuNjIzaDQ4LjExN2M0LjE0MiAwIDcuNS0zLjM1NyA3LjUtNy41cy0zLjM1OC03LjUtNy41LTcuNWgtNDguMTE3Yy0xOS4xNzkgMC0zNC43ODIgMTUuNTMyLTM0Ljc4MiAzNC42MjMgMCAxOS4wOTIgMTUuNjAzIDM0LjYyNCAzNC43ODIgMzQuNjI0aDEyNy4zOTVsLTEyLjgzMyAxMi43NTljLTQuMjkxIDQuMjY2LTcuMzE1IDkuNDU0LTguOTA2IDE1LjExMmgtMTY1LjEwOWMtNC4xNDIgMC03LjUgMy4zNTctNy41IDcuNXMzLjM1OCA3LjUgNy41IDcuNWgxNjQuMjc0YzEuMTYgNy4xMTggNC41MTIgMTMuNjggOS43MzYgMTguODczIDEzLjU1MSAxMy41MDEgMzUuNjA3IDEzLjUwNCA0OS4xNTguMDA1bDcyLjI2My03MS44NDRjNi45MjgtNi43OTggMTAuNzM2LTE2LjY0OCAxMC4xOS0yNi4yODN6Ii8+PC9nPjwvc3ZnPg==" />
        </div>
        <br>
        <p class="my-content">
            <b>Instructions :</b>
        </p>
        <p class="my-content">
            • Please prepare 8-10 slides in PPTX/PPT/PDF format.
        </p>
        
        <p class="my-content">
            • Please make sure you restrict your presentation to under 10 minutes.
        </p>
        <br>
        <div class="single-box">
            <div id="uploadForm" class="well well-lg">
                <form method="POST" enctype="multipart/form-data" onsubmit="return Validate(this)" action="../ppt-submission/">
                    {% csrf_token %}
                    <div class="form-group">
                        <div class="form-subgroup half">
                          <label class="formText">Abstract ID</label><br>
                          <input class="my-input" type="text" name="abs_id" id="abs_id" placeholder="GCIMBXXXXXX" required/>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-subgroup half">
                            <label class="formText">Prefix</label><br>
                            <select class="my-input" id="prefix" name="prefix" required>
                                <option value="" disabled selected>Select...</option>
                                <option value="Dr.">Dr.</option>
                                <option value="Mrs.">Mrs.</option>
                                <option value="Ms.">Ms.</option>
                                <option value="Mr.">Mr.</option>
                            </select>
                        </div>
                        <div class="form-subgroup half">
                                <label class="formText">First Name</label><br>
                                <input class="my-input" type="text" name="fname" id="fname" required/>
                            </div>
                    </div>
                    <div class="form-group">
                        <div class="form-subgroup half">
                                <label class="formText">Last Name</label><br>
                                <input class="my-input" type="text" name="lname" id="lname" required/>
                            </div>
                        <div class="form-subgroup half">
                                <label class="formText">Country</label><br>
                                <select class="my-input" id="country" name ="country"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-subgroup half">
                                <label class="formText">State</label><br>
                                <select  class="my-input" name ="state" id ="state"></select>
                        </div>
                        <div class="form-subgroup half">
                            <label class="formText">Institution/Organization</label><br>
                            <input class="my-input" type="text" name="institution" id="institution" required/>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-subgroup half">
                            <label class="formText">Email</label><br>
                            <input class="my-input" type="email" name="email" id="email" required/>
                        </div>
                        <div class="form-subgroup half">
                            <label class="formText">Phone No. (with country code)</label><br>
                            <input class="my-input" type="text" name="phone" id="phone" required/>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-subgroup half">
                            <label class="formText">Track</label><br>
                            <select class="my-input" id="track" name="track" required>
                                <option value="" disabled selected>Select...</option>
                                <option value="Business Analytics">Business Analytics</option>
                                <option value="Crisis Management">Crisis Management</option>
                                <option value="Digital Transformation and Information Systems">Digital Transformation and Information Systems</option>
                                <option value="Economics and International Business">Economics and International Business</option>
                                <option value="Entrepreneurship and Innovation">Entrepreneurship and Innovation</option>
                                <option value="Financial Management and Investment">Financial Management and Investment</option>
                                <option value="General Management">General Management</option>
                                <option value="Human Resource Management and Leadership">Human Resource Management and Leadership</option>
                                <option value="Marketing and Customer Insights">Marketing and Customer Insights</option>
                                <option value="Operations and Supply Chain Management">Operations and Supply Chain Management</option>
                                <option value="Pluralism—Cultural, Moral and Religious">Pluralism—Cultural, Moral and Religious</option>
                                <option value="Strategic Management and Corporate Governance">Strategic Management and Corporate Governance</option>
                            </select>
                        </div>
                        <div class="form-subgroup half">
                            <label class="formText" for="title">Title</label>
                            <input class="my-input" type="text" name="title"  id="title" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-subgroup half">
                            <label class="formText">Upload presentation file (.pdf, .ppt or .pptx file)</label>
                            <br>    
                            <div class="file-upload">
                                <div id="fus1" class="file-upload-select">
                                    <div id="fsb1" class="file-select-button" >Choose File</div>
                                <div id="fsn1" class="file-select-name">No file chosen...</div> 
                                <input type="file" id="pdf" name="pdf" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group" >
                        <button class="my-input formButton nonlinkButton"  type="submit">Submit</button>
                    </div>
                </form>
                <br>
            </div>
        </div>
    </div>
</section>
<script>
    populateCountries("country", "state");
</script>
<script>
    let fileInput = document.getElementById("pdf");
    let fileSelect = document.getElementById("fus1");
    let fileButton = document.getElementById("fsb1");
    fileSelect.onclick = function() {
        fileInput.click();
    }
    fileInput.onchange = function() {
        let filename = fileInput.files[0].name;
        let selectName = document.getElementById("fsn1");
        fileButton.style.background = "#43cae8";
        fileButton.style.color = "white";
        
        if(filename.length < 21)
            selectName.innerText = filename;
        else
            selectName.innerText = filename.substring(0,20) + '...';
    }
</script>


{% endblock content %} 